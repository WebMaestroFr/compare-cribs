(this["webpackJsonpcompare-cribs"]=this["webpackJsonpcompare-cribs"]||[]).push([[0],{1141:function(e,t,n){"use strict";n.r(t);var a=n(6),r=n.n(a),c=n(116),l=n.n(c),o=(n(520),n(521),n(137)),u=n(510),i=n(1145),s=n(503),f=n.n(s),m=n(511),d=Object(a.createContext)(null),b=function(){return Object(a.useContext)(d)},p=function(){return r.a.createElement("td",{colSpan:2},r.a.createElement("em",null,"Loading..."))},E=n(96),v=n(1146),h=n(1143),k=n(1144),O=n(505),g=function(e){var t=e.attribute;return r.a.createElement("p",{className:"OfferAttributes-attribute",title:t.key},r.a.createElement("small",null,t.key_label||t.key),r.a.createElement(h.a,{variant:"secondary"},t.value_label||t.value))},w=function(e){var t,n=e.attributes,c=Object(a.useState)(!1),l=Object(E.a)(c,2),o=l[0],u=l[1],i=n.filter((function(e){return["energy_rate","fai_included","ges"].includes(e.key)})),s=n.filter((function(e){return!["energy_rate","fai_included","ges","rooms","square"].includes(e.key)})),f=(t="rooms",n.find((function(e){return e.key===t})));return r.a.createElement("div",{className:"OfferAttributes"},f?r.a.createElement("p",{className:"OfferAttributes-rooms"},r.a.createElement("big",null,f.value)," ",f.key_label):null,r.a.createElement("hr",null),i.map((function(e){return r.a.createElement(g,{key:e.key,attribute:e})})),o?s.map((function(e){return r.a.createElement(g,{key:e.key,attribute:e})})):r.a.createElement(k.a,{block:!0,onClick:function(){return u(!0)},variant:"light"},r.a.createElement(O.a,{icon:"ellipsis-h"})))},y=function(e){var t=e.link,n=b().getOffer,c=Object(a.useState)(),l=Object(E.a)(c,2),o=l[0],u=l[1];Object(a.useEffect)((function(){console.count("FETCHING AND RENDERING OFFER"),n(t).then(u)}),[n,t]);var i,s=(i="square",null===o||void 0===o?void 0:o.attributes.find((function(e){return e.key===i}))),f="https://www.leboncoin.fr"+t,m=null===o||void 0===o?void 0:o.price[0],d=s?Number(m)/Number(s.value):0;return o?r.a.createElement(r.a.Fragment,null,r.a.createElement("td",null,r.a.createElement("a",{className:"OfferRow-link",href:f,rel:"noopener noreferrer",target:"_blank"},r.a.createElement("strong",{className:"OfferRow-subject"},o.subject)),r.a.createElement(v.a,{className:"OfferRow-images",interval:null},o.images.urls.map((function(e,t){return r.a.createElement(v.a.Item,{key:t},r.a.createElement("img",{alt:o.subject,src:e}))}))),r.a.createElement("p",{className:"OfferRow-body"},o.body)),r.a.createElement("td",null,r.a.createElement("div",{className:"OfferRow-header"},r.a.createElement("big",{className:"OfferRow-price"},Number(m).toLocaleString("fr")," ",r.a.createElement("small",null,"\u20ac")),r.a.createElement("span",{className:"OfferRow-separator"},"/"),r.a.createElement("big",{className:"OfferRow-square"},null===s||void 0===s?void 0:s.value," ",r.a.createElement("small",null,"m\xb2"))),r.a.createElement(h.a,{variant:"secondary"},d.toFixed(2)," ",r.a.createElement("small",null,"\u20ac/m\xb2")),r.a.createElement("hr",null),r.a.createElement(w,{attributes:o.attributes}))):r.a.createElement(p,null)},N=function(){var e=b(),t=e.links,n=e.hasMore,a=e.loadMore,c=r.a.createElement("tr",{key:0},r.a.createElement(p,null));return r.a.createElement(i.a,{className:"OfferTable",striped:!0,bordered:!0,hover:!0},r.a.createElement(f.a,{element:"tbody",loadMore:a,hasMore:n,loader:c},t.map((function(e){var t=r.a.createElement(y,{link:e}),n=r.a.createElement(p,null);return r.a.createElement(m.a,{className:"OfferRow",component:"tr",content:t,key:e,placeholder:n})}))))},_=n(266),j=n(54),x=n.n(j),R=n(265),A=n(264),S=n(509),q=Object(S.setup)({baseURL:"https://www.leboncoin.fr",cache:{maxAge:18e5}}),L=function(e,t){return q.get(e,t).then((function(e){return new A.JSDOM(e.data)}))},M=function(){var e=Object(R.a)(x.a.mark((function e(t){var n,a,r,c;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.window.document.querySelector("#__NEXT_DATA__"),c=(null===r||void 0===r?void 0:r.textContent)&&JSON.parse(r.textContent),e.abrupt("return",null===c||void 0===c||null===(n=c.props)||void 0===n||null===(a=n.pageProps)||void 0===a?void 0:a.ad);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(R.a)(x.a.mark((function e(t){var n,a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Array.from(t.window.document.querySelectorAll('span[name="chevronright"]')).map((function(e){return e.parentNode})).find((function(e){return"A"===(e&&e.nodeName)})),a=Array.from(t.window.document.querySelectorAll('li[data-qa-id="aditem_container"] a')).map((function(e){return e.href})),e.abrupt("return",{links:a,nextPageLink:n?n.href:void 0});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F={getLinks:function(e){return L(e).then(C)},getOffer:function(e){return L(e).then(M)},search:function(e){return L("/recherche",{params:e}).then(C)}},P=function(e){var t=e.children,n=Object(a.useState)(),c=Object(E.a)(n,2),l=c[0],o=c[1],u=Object(a.useState)([]),i=Object(E.a)(u,2),s=i[0],f=i[1];return Object(a.useEffect)((function(){F.search({category:"9",immo_sell_type:"old,new",locations:"Caen_14000__49.18461_-0.37375_4167",price:"75000-175000",real_estate_type:"2",rooms:"3-max",square:"30-max"}).then((function(e){o(e.nextPageLink),f(e.links)}),console.error)}),[]),r.a.createElement(d.Provider,{value:{getOffer:F.getOffer,hasMore:void 0!==l,links:s,loadMore:function(){return l&&F.getLinks(l).then((function(e){o(e.nextPageLink),f((function(t){return[].concat(Object(_.a)(t),Object(_.a)(e.links))}))}))}}},t)};o.b.add(u.a);var D=function(){return r.a.createElement(P,null,r.a.createElement(N,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(D,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},318:function(e,t){},515:function(e,t,n){e.exports=n(1141)},520:function(e,t,n){},575:function(e,t){},576:function(e,t){},879:function(e,t){},881:function(e,t){},890:function(e,t){},892:function(e,t){},924:function(e,t){},925:function(e,t){},930:function(e,t){},932:function(e,t){},956:function(e,t){},991:function(e,t){}},[[515,1,2]]]);
//# sourceMappingURL=main.7286eea6.chunk.js.map