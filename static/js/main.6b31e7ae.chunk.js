(this["webpackJsonpcompare-cribs"]=this["webpackJsonpcompare-cribs"]||[]).push([[0],{101:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(19),c=n.n(l),o=(n(65),n(66),n(21)),u=n(33),i=n(105),s=n(47),m=n.n(s),f=n(54),d=Object(a.createContext)(null),b=function(){return Object(a.useContext)(d)},p=function(){return r.a.createElement("td",{colSpan:2},r.a.createElement("em",null,"Loading..."))},E=n(11),v=n(107),h=n(103),g=n(108),O=Object(a.createContext)(null),y=n(27),k=n(104),w=function(e){var t=e.attribute;return r.a.createElement("p",{className:"OfferAttributes-attribute",title:t.key},r.a.createElement("small",null,t.key_label||t.key),r.a.createElement(h.a,{variant:"secondary"},t.value_label||t.value))},j=function(e){var t,n=e.attributes,l=Object(a.useState)(!1),c=Object(E.a)(l,2),o=c[0],u=c[1],i=n.filter((function(e){return["energy_rate","fai_included","ges"].includes(e.key)})),s=n.filter((function(e){return!["energy_rate","fai_included","ges","rooms","square"].includes(e.key)})),m=(t="rooms",n.find((function(e){return e.key===t})));return r.a.createElement("div",{className:"OfferAttributes"},m?r.a.createElement("p",{className:"OfferAttributes-rooms"},r.a.createElement("big",null,m.value)," ",m.key_label):null,r.a.createElement("hr",null),i.map((function(e){return r.a.createElement(w,{key:e.key,attribute:e})})),o?s.map((function(e){return r.a.createElement(w,{key:e.key,attribute:e})})):r.a.createElement(k.a,{block:!0,onClick:function(){return u((function(e){return!e}))},variant:"light"},r.a.createElement(y.a,{icon:"ellipsis-h"})))},_=function(e){var t=e.link,n=Object(a.useContext)(O),l=n.read,c=n.write,o=b().getOffer,u=t.match(/.*\/(.+?)\./),i=u&&u[1],s=Object(a.useState)(),m=Object(E.a)(s,2),f=m[0],d=m[1],y=Object(a.useState)(),k=Object(E.a)(y,2),w=k[0],_=k[1];Object(a.useEffect)((function(){i&&(o(t).then(d),l(i).then(_,console.error))}),[o,t,i,l]);var S,N=(S="square",null===f||void 0===f?void 0:f.attributes.find((function(e){return e.key===S}))),x="https://www.leboncoin.fr"+t,C=null===f||void 0===f?void 0:f.price[0],A=N?Number(C)/Number(N.value):0,R=i?function(e){var t=e.currentTarget.value;c(i,{note:t})}:void 0;return f?r.a.createElement(r.a.Fragment,null,r.a.createElement("td",null,r.a.createElement("a",{className:"OfferRow-link",href:x,rel:"noopener noreferrer",target:"_blank"},r.a.createElement("strong",{className:"OfferRow-subject"},f.subject)),r.a.createElement(v.a,{className:"OfferRow-images",interval:null},f.images.urls.map((function(e,t){return r.a.createElement(v.a.Item,{key:t},r.a.createElement("img",{alt:f.subject,src:e}))}))),r.a.createElement("p",{className:"OfferRow-body"},f.body)),r.a.createElement("td",null,r.a.createElement("div",{className:"OfferRow-header"},r.a.createElement("big",{className:"OfferRow-price"},Number(C).toLocaleString("fr")," ",r.a.createElement("small",null,"\u20ac")),r.a.createElement("span",{className:"OfferRow-separator"},"/"),r.a.createElement("big",{className:"OfferRow-square"},null===N||void 0===N?void 0:N.value," ",r.a.createElement("small",null,"m\xb2"))),r.a.createElement(h.a,{variant:"secondary"},A.toFixed(2)," ",r.a.createElement("small",null,"\u20ac/m\xb2")),r.a.createElement("hr",null),r.a.createElement("strong",null,f.location.city),r.a.createElement(j,{attributes:f.attributes})),r.a.createElement("td",null,r.a.createElement(g.a,{className:"OfferRow-notes"},r.a.createElement(g.a.Control,{as:"textarea",onChange:R,defaultValue:null===w||void 0===w?void 0:w.note})))):r.a.createElement(p,null)},S=function(){var e=b(),t=e.links,n=e.hasMore,a=e.loadMore,l=r.a.createElement("tr",{key:0},r.a.createElement(p,null));return r.a.createElement(i.a,{className:"OfferTable",striped:!0,bordered:!0,hover:!0},r.a.createElement(m.a,{element:"tbody",loadMore:a,hasMore:n,loader:l},t.map((function(e){var t=r.a.createElement(_,{link:e}),n=r.a.createElement(p,null);return r.a.createElement(f.a,{className:"OfferRow",component:"tr",content:t,key:e,placeholder:n})}))))},N=n(15),x=n.n(N),C=n(58),A=n(106),R=n(57),L=n(52),P=function(e){var t=e.onSignin,n=Object(C.a)(e,["onSignin"]),l=Object(a.useState)(),c=Object(E.a)(l,2),o=c[0],u=c[1],i=Object(a.useState)(""),s=Object(E.a)(i,2),m=s[0],f=s[1],d=Object(a.useState)(""),b=Object(E.a)(d,2),p=b[0],v=b[1];return r.a.createElement(A.a,null,o?r.a.createElement(y.a,{icon:"spinner",spin:!0}):r.a.createElement(g.a,Object.assign({onSubmit:function(e){u(!0),e.preventDefault(),console.log({email:m,password:p}),x.a.auth().signInWithEmailAndPassword(m,p).then(t,window.alert).finally((function(){return u(!1)}))}},n),r.a.createElement(g.a.Group,null,r.a.createElement(R.a,null,"Email"),r.a.createElement(L.a,{defaultValue:m,onChange:function(e){return f(e.currentTarget.value)},type:"email"})),r.a.createElement(g.a.Group,null,r.a.createElement(R.a,null,"Password"),r.a.createElement(L.a,{defaultValue:p,onChange:function(e){return v(e.currentTarget.value)},type:"password"})),r.a.createElement(g.a.Group,null,r.a.createElement(g.a.Control,{type:"submit",value:"Login"}))))},q=function(e){var t=e.children,n=Object(a.useState)(),l=Object(E.a)(n,2),c=l[0],o=l[1],u=Object(a.useCallback)((function(e){return new Promise((function(t,n){return x.a.database().ref(e).on("value",(function(e){var n=e.val();t(n)}),n)}))}),[]),i=Object(a.useCallback)((function(e,t){return x.a.database().ref(e).set(t)}),[]);return Object(a.useEffect)((function(){x.a.initializeApp({apiKey:"AIzaSyBEY_VzCdPC2JGCZLKf-EQ4DXhGAbV7ZzU",appId:"1:300973941756:web:db15739d45c57cf4efc879",authDomain:"lecoincoin-c16f9.firebaseapp.com",databaseURL:"https://lecoincoin-c16f9.firebaseio.com",measurementId:"G-B18K0TER1G",messagingSenderId:"300973941756",projectId:"lecoincoin-c16f9",storageBucket:"lecoincoin-c16f9.appspot.com"}),x.a.analytics()}),[]),void 0===c?r.a.createElement(P,{onSignin:o}):r.a.createElement(O.Provider,{value:{read:u,write:i}},t)},I=n(34),M=n(20),G=n.n(M),T=n(32),B=n(53),D=Object(B.setup)({baseURL:"https://www.leboncoin.fr",cache:{maxAge:18e5}}),V=new DOMParser,z=function(e,t){var n=function(){try{return new URL(e).pathname}catch(t){return e}}();return D.get(n,t).then((function(e){return V.parseFromString(e.data,"text/html")}))},J=function(){var e=Object(T.a)(G.a.mark((function e(t){var n,a,r,l;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.querySelector("#__NEXT_DATA__"),l=(null===r||void 0===r?void 0:r.textContent)&&JSON.parse(r.textContent),e.abrupt("return",null===l||void 0===l||null===(n=l.props)||void 0===n||null===(a=n.pageProps)||void 0===a?void 0:a.ad);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=Object(T.a)(G.a.mark((function e(t){var n,a;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Array.from(t.querySelectorAll('span[name="chevronright"]')).map((function(e){return e.parentNode})).find((function(e){return"A"===(e&&e.nodeName)})),a=Array.from(t.querySelectorAll('li[data-qa-id="aditem_container"] a')).map((function(e){return e.href})),console.log({links:a,nextPageLink:n?n.href:void 0}),e.abrupt("return",{links:a,nextPageLink:n?n.href:void 0});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F={getLinks:function(e){return z(e).then(U)},getOffer:function(e){return z(e).then(J)},search:function(e){return z("/recherche",{params:e}).then(U)}},K=function(e){var t=e.children,n=Object(a.useState)(),l=Object(E.a)(n,2),c=l[0],o=l[1],u=Object(a.useState)([]),i=Object(E.a)(u,2),s=i[0],m=i[1];return Object(a.useEffect)((function(){F.search({category:"9",immo_sell_type:"old,new",locations:"Caen_14000__49.18461_-0.37375_4167",price:"75000-175000",real_estate_type:"2",rooms:"3-max",square:"30-max"}).then((function(e){o(e.nextPageLink),m(e.links)}),console.error)}),[]),r.a.createElement(d.Provider,{value:{getOffer:F.getOffer,hasMore:void 0!==c,links:s,loadMore:function(){return c&&F.getLinks(c).then((function(e){o(e.nextPageLink),m((function(t){return[].concat(Object(I.a)(t),Object(I.a)(e.links))}))}))}}},t)};o.b.add(u.a,u.b);var W=function(){return r.a.createElement(K,null,r.a.createElement(q,null,r.a.createElement(S,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(W,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},60:function(e,t,n){e.exports=n(101)},65:function(e,t,n){}},[[60,1,2]]]);
//# sourceMappingURL=main.6b31e7ae.chunk.js.map