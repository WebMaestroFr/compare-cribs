(this["webpackJsonpcompare-cribs"]=this["webpackJsonpcompare-cribs"]||[]).push([[0],{47:function(e,t,n){e.exports=n(78)},52:function(e,t,n){},78:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(9),c=n.n(l),o=(n(52),n(53),n(11)),u=n(42),i=n(82),s=n(35),m=n.n(s),f=n(43),d=Object(a.createContext)(null),b=function(){return Object(a.useContext)(d)},E=function(){return r.a.createElement("td",{colSpan:2},r.a.createElement("em",null,"Loading..."))},p=n(7),v=n(84),h=n(80),g=n(83),k=n(81),O=n(37),y=function(e){var t=e.attribute;return r.a.createElement("p",{className:"OfferAttributes-attribute",title:t.key},r.a.createElement("small",null,t.key_label||t.key),r.a.createElement(h.a,{variant:"secondary"},t.value_label||t.value))},w=function(e){var t,n=e.attributes,l=Object(a.useState)(!1),c=Object(p.a)(l,2),o=c[0],u=c[1],i=n.filter((function(e){return["energy_rate","fai_included","ges"].includes(e.key)})),s=n.filter((function(e){return!["energy_rate","fai_included","ges","rooms","square"].includes(e.key)})),m=(t="rooms",n.find((function(e){return e.key===t})));return r.a.createElement("div",{className:"OfferAttributes"},m?r.a.createElement("p",{className:"OfferAttributes-rooms"},r.a.createElement("big",null,m.value)," ",m.key_label):null,r.a.createElement("hr",null),i.map((function(e){return r.a.createElement(y,{key:e.key,attribute:e})})),o?s.map((function(e){return r.a.createElement(y,{key:e.key,attribute:e})})):r.a.createElement(k.a,{block:!0,onClick:function(){return u(!0)},variant:"light"},r.a.createElement(O.a,{icon:"ellipsis-h"})))},N=function(e){var t=e.link,n=b().getOffer,l=Object(a.useState)(),c=Object(p.a)(l,2),o=c[0],u=c[1];Object(a.useEffect)((function(){console.count("FETCHING AND RENDERING OFFER"),n(t).then(u)}),[n,t]);var i,s=(i="square",null===o||void 0===o?void 0:o.attributes.find((function(e){return e.key===i}))),m="https://www.leboncoin.fr"+t,f=null===o||void 0===o?void 0:o.price[0],d=s?Number(f)/Number(s.value):0;return o?r.a.createElement(r.a.Fragment,null,r.a.createElement("td",null,r.a.createElement("a",{className:"OfferRow-link",href:m,rel:"noopener noreferrer",target:"_blank"},r.a.createElement("strong",{className:"OfferRow-subject"},o.subject)),r.a.createElement(v.a,{className:"OfferRow-images",interval:null},o.images.urls.map((function(e,t){return r.a.createElement(v.a.Item,{key:t},r.a.createElement("img",{alt:o.subject,src:e}))}))),r.a.createElement("p",{className:"OfferRow-body"},o.body)),r.a.createElement("td",null,r.a.createElement("div",{className:"OfferRow-header"},r.a.createElement("big",{className:"OfferRow-price"},Number(f).toLocaleString("fr")," ",r.a.createElement("small",null,"\u20ac")),r.a.createElement("span",{className:"OfferRow-separator"},"/"),r.a.createElement("big",{className:"OfferRow-square"},null===s||void 0===s?void 0:s.value," ",r.a.createElement("small",null,"m\xb2"))),r.a.createElement(h.a,{variant:"secondary"},d.toFixed(2)," ",r.a.createElement("small",null,"\u20ac/m\xb2")),r.a.createElement("hr",null),r.a.createElement("strong",null,o.location.city),r.a.createElement(w,{attributes:o.attributes})),r.a.createElement("td",null,r.a.createElement(g.a,{className:"OfferRow-notes"},r.a.createElement(g.a.Control,{as:"textarea"})))):r.a.createElement(E,null)},_=function(){var e=b(),t=e.links,n=e.hasMore,a=e.loadMore,l=r.a.createElement("tr",{key:0},r.a.createElement(E,null));return r.a.createElement(i.a,{className:"OfferTable",striped:!0,bordered:!0,hover:!0},r.a.createElement(m.a,{element:"tbody",loadMore:a,hasMore:n,loader:l},t.map((function(e){var t=r.a.createElement(N,{link:e}),n=r.a.createElement(E,null);return r.a.createElement(f.a,{className:"OfferRow",component:"tr",content:t,key:e,placeholder:n})}))))},j=n(20),x=n(10),R=n.n(x),A=n(19),S=n(41),L=Object(S.setup)({baseURL:"https://www.leboncoin.fr",cache:{maxAge:18e5}}),q=new DOMParser,C=function(e,t){var n=function(){try{return new URL(e).pathname}catch(t){return e}}();return L.get(n,t).then((function(e){return q.parseFromString(e.data,"text/html")}))},M=function(){var e=Object(A.a)(R.a.mark((function e(t){var n,a,r,l;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.querySelector("#__NEXT_DATA__"),l=(null===r||void 0===r?void 0:r.textContent)&&JSON.parse(r.textContent),e.abrupt("return",null===l||void 0===l||null===(n=l.props)||void 0===n||null===(a=n.pageProps)||void 0===a?void 0:a.ad);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Object(A.a)(R.a.mark((function e(t){var n,a;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Array.from(t.querySelectorAll('span[name="chevronright"]')).map((function(e){return e.parentNode})).find((function(e){return"A"===(e&&e.nodeName)})),a=Array.from(t.querySelectorAll('li[data-qa-id="aditem_container"] a')).map((function(e){return e.href})),console.log({links:a,nextPageLink:n?n.href:void 0}),e.abrupt("return",{links:a,nextPageLink:n?n.href:void 0});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F={getLinks:function(e){return C(e).then(P)},getOffer:function(e){return C(e).then(M)},search:function(e){return C("/recherche",{params:e}).then(P)}},D=function(e){var t=e.children,n=Object(a.useState)(),l=Object(p.a)(n,2),c=l[0],o=l[1],u=Object(a.useState)([]),i=Object(p.a)(u,2),s=i[0],m=i[1];return Object(a.useEffect)((function(){F.search({category:"9",immo_sell_type:"old,new",locations:"Caen_14000__49.18461_-0.37375_4167",price:"75000-175000",real_estate_type:"2",rooms:"3-max",square:"30-max"}).then((function(e){o(e.nextPageLink),m(e.links)}),console.error)}),[]),r.a.createElement(d.Provider,{value:{getOffer:F.getOffer,hasMore:void 0!==c,links:s,loadMore:function(){return c&&F.getLinks(c).then((function(e){o(e.nextPageLink),m((function(t){return[].concat(Object(j.a)(t),Object(j.a)(e.links))}))}))}}},t)};o.b.add(u.a);var I=function(){return r.a.createElement(D,null,r.a.createElement(_,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(I,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[47,1,2]]]);
//# sourceMappingURL=main.7b12222d.chunk.js.map